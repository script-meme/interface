"use strict";(self["webpackChunkScript"]=self["webpackChunkScript"]||[]).push([[792],{7349:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var i=a(3396),l=a(7139),r=a(9242),o=a.p+"img/right_outlined.748db79d.svg";const n={class:"token_box"},s={class:"center_box"},d=(0,i._)("p",{class:"token_title large_text"},"Check out script balance",-1),m={class:"token_input"},c=(0,i._)("p",{class:"token_text"},"Recognize all operations, deploy mint transfer.",-1),p={class:"card_box"},u=(0,i._)("div",{class:"card_top"},[(0,i._)("p",{class:"middle_text"},"The full list of scripts ")],-1),g={class:"card_segmented"},h={key:0,class:"list_item_boxA"},w=["src"],f={key:1,class:"list_item_boxB"},b={key:2,class:"list_item_boxB"},k={key:3,class:"list_item_boxB"},_={key:4,class:"list_item_boxC"},v=(0,i._)("img",{style:{width:"20px",height:"20px"},src:o,alt:""},null,-1),x=(0,i._)("div",{style:{"padding-bottom":"20px",color:"red","text-align":"center"}}," Deployers receive 1% of marketplace transaction fees. ",-1),y={style:{"padding-top":"10px",color:"red"}};function S(e,t,a,o,S,C){const M=(0,i.up)("a-input-search"),W=(0,i.up)("a-segmented"),z=(0,i.up)("a-button"),P=(0,i.up)("a-progress"),F=(0,i.up)("a-table"),T=(0,i.up)("a-input"),A=(0,i.up)("a-form-item"),q=(0,i.up)("a-radio"),I=(0,i.up)("a-radio-group"),D=(0,i.up)("a-form"),U=(0,i.up)("a-space"),Z=(0,i.up)("a-modal");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",s,[d,(0,i._)("div",m,[(0,i.Wm)(M,{value:e.maxSearchValue,"onUpdate:value":t[0]||(t[0]=t=>e.maxSearchValue=t),placeholder:"",style:{width:"640px"},size:e.isMobile?"middle":"large",allowClear:"",onSearch:e.onMaxSearch},null,8,["value","size","onSearch"])]),c,(0,i._)("div",p,[u,(0,i._)("div",g,[(0,i.Wm)(W,{value:e.type,"onUpdate:value":t[1]||(t[1]=t=>e.type=t),options:e.options,onChange:e.onSegmented,size:e.isMobile?"middle":"large"},null,8,["value","options","onChange","size"]),(0,i.Wm)(z,{size:e.isMobile?"middle":"large",type:"primary",shape:"round",onClick:e.showModal},{default:(0,i.w5)((()=>[(0,i.Uk)("Deploy")])),_:1},8,["size","onClick"])]),(0,i.Wm)(F,{style:{width:"1078px","overflow-x":"auto"},columns:e.columns,"data-source":e.data,customRow:e.handleClickRow,loading:e.tableLoading,onChange:e.tableChange,pagination:e.pagination,"row-class-name":"table-striped table-market"},{bodyCell:(0,i.w5)((({column:a,record:r,text:o})=>["name"===a.dataIndex?((0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("p",null,[(0,i._)("img",{style:{width:"35px",height:"35px","margin-right":"10px","border-radius":"17.5px"},src:r.logo||"https://app.script.meme/coin.png",onError:t[2]||(t[2]=e=>{e.target.src="https://app.script.meme/coin.png"})},null,40,w),(0,i.Uk)(" "+(0,l.zw)(o),1)])])):(0,i.kq)("",!0),"time"===a.dataIndex?((0,i.wg)(),(0,i.iD)("div",f,[(0,i._)("p",null,(0,l.zw)(e.formatter(o)),1)])):(0,i.kq)("",!0),"holders"===a.dataIndex?((0,i.wg)(),(0,i.iD)("div",b,[(0,i._)("p",null,(0,l.zw)(o),1)])):(0,i.kq)("",!0),"progress"===a.dataIndex?((0,i.wg)(),(0,i.iD)("div",k,[(0,i._)("p",null,(0,l.zw)(o+"%"),1),(0,i.Wm)(P,{style:{width:"210px"},strokeColor:"#5AE86F",status:"active",percent:Math.floor(o),"show-info":!1},null,8,["percent"])])):(0,i.kq)("",!0),"transactions"===a.dataIndex?((0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("p",null,(0,l.zw)(o),1),v])):(0,i.kq)("",!0)])),_:1},8,["columns","data-source","customRow","loading","onChange","pagination"])])]),(0,i.Wm)(Z,{centered:"",width:"600px",open:e.open,"onUpdate:open":t[9]||(t[9]=t=>e.open=t),title:"Deploy Script"},{footer:(0,i.w5)((()=>[(0,i.Wm)(U,{size:e.isMobile?"middle":"large"},{default:(0,i.w5)((()=>[(0,i.Wm)(z,{style:{width:"100px"},key:"back",block:"",size:e.isMobile?"middle":"large",onClick:e.handleCancel},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:1},8,["size","onClick"]),(0,i.Wm)(z,{style:{width:"100px"},key:"submit",block:"",type:"primary",size:e.isMobile?"middle":"large",loading:e.loading,onClick:e.onSubmit},{default:(0,i.w5)((()=>[(0,i.Uk)("Deploy")])),_:1},8,["size","loading","onClick"])])),_:1},8,["size"])])),default:(0,i.w5)((()=>[(0,i.Wm)(D,{class:"form_box",ref:"formRef",model:e.formState,rules:e.rules,"label-col":{style:{width:"150px"}},labelAlign:"left",autoComplete:"off"},{default:(0,i.w5)((()=>[x,(0,i.Wm)(A,{label:"Tick",name:"tick",rules:[{required:!0,message:"Please enter a maximum of 4 characters",max:4,min:4,trigger:"change"}]},{default:(0,i.w5)((()=>[(0,i.Wm)(T,{type:"text",value:e.formState.tick,"onUpdate:value":t[3]||(t[3]=t=>e.formState.tick=t),size:"large",placeholder:"Identifier of the token, like ORDI"},null,8,["value"])])),_:1}),(0,i.Wm)(A,{label:"Total Supply",name:"totalSupply",rules:[{required:!0,pattern:/^[0-9]*$/,message:"Please enter a number"}]},{default:(0,i.w5)((()=>[(0,i.Wm)(T,{value:e.formState.totalSupply,"onUpdate:value":t[4]||(t[4]=t=>e.formState.totalSupply=t),size:"large",placeholder:"21000000"},null,8,["value"])])),_:1}),(0,i.Wm)(A,{label:"Limit Per Mint",name:"limitPerMint",rules:[{required:!0,pattern:/^[0-9]*$/,message:"Please enter a number"}]},{default:(0,i.w5)((()=>[(0,i.Wm)(T,{value:e.formState.limitPerMint,"onUpdate:value":t[5]||(t[5]=t=>e.formState.limitPerMint=t),size:"large",placeholder:"1000"},null,8,["value"])])),_:1}),(0,i.Wm)(A,{label:"Limit Per Address",name:"limitPerAddress",rules:[{required:!0,pattern:/^[0-9]*$/,message:"Please enter a number"}]},{default:(0,i.w5)((()=>[(0,i.Wm)(T,{value:e.formState.limitPerAddress,"onUpdate:value":t[6]||(t[6]=t=>e.formState.limitPerAddress=t),size:"large",placeholder:"Maximum number of mints for a single address"},null,8,["value"])])),_:1}),(0,i.Wm)(A,{label:"Mint Fee",name:"mintFee",rules:[{required:!0,pattern:/^\d+(\.\d{1,})$|(^[0-9]\d*$)/,message:"Please enter a number or decimal"}]},{default:(0,i.w5)((()=>[(0,i.Wm)(T,{value:e.formState.mintFee,"onUpdate:value":t[7]||(t[7]=t=>e.formState.mintFee=t),size:"large",placeholder:e.mintFeeTip},null,8,["value","placeholder"])])),_:1},8,["rules"]),(0,i.Wm)(A,{label:"Whitelist",name:"whitelist",rules:[{required:!0}]},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{value:e.formState.whitelist,"onUpdate:value":t[8]||(t[8]=t=>e.formState.whitelist=t),name:"whitelist"},{default:(0,i.w5)((()=>[(0,i.Wm)(q,{value:"0"},{default:(0,i.w5)((()=>[(0,i.Uk)("No")])),_:1}),(0,i.Wm)(q,{value:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)("Yes")])),_:1})])),_:1},8,["value"]),(0,i.wy)((0,i._)("div",y," Whitelist can be added after deployed. ",512),[[r.F8,"1"==e.formState.whitelist]])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["open"])])}a(560);var C=a(4870),M=a(2483),W=a(4476),z=a(9694),P=a(65),F=a(2367),T=(0,i.aZ)({name:"Tokens",setup(){const e=(0,M.tv)(),t=(0,C.iH)(),a=(0,P.oR)(),l=(0,C.qj)({protocol:"script",tick:"",totalSupply:"",limitPerMint:"",limitPerAddress:"",whitelist:"0",mintFee:""}),r=(0,C.qj)({isMobile:(0,i.Fl)((()=>a.state.isMobile)),maxSearchValue:"",minSearchValue:"",type:"All",options:["All","In-progress","Completed"],tableLoading:!0,page:1,pagination:{current:1,total:0,pageSize:20},columns:[{title:"Script",dataIndex:"name",key:"name",width:212,ellipsis:!0,className:"table_head"},{title:"Deploy Time",dataIndex:"time",key:"time",width:262,className:"table_head"},{title:"Progress",dataIndex:"progress",key:"progress",width:262,className:"table_head"},{title:"Holders",dataIndex:"holders",key:"holders",width:162,className:"table_head"},{title:"Transactions",dataIndex:"transactions",key:"transactions",width:162,className:"table_head"}],data:[],loading:!1,open:!1,mintFeeTip:""});(0,i.bv)((()=>{r.page=1,o.loadTokens()}));const o={onSegmented(e){o.tableChange({current:1})},tableChange(e){r.page=e.current,o.loadTokens()},loadTokens(){r.tableLoading=!0;var e=0;"In-progress"==r.type&&(e=1),"Completed"==r.type&&(e=2),(0,z.lz)(e,r.page).then((e=>{r.tableLoading=!1,0==e.code?(r.data=e.data.list,r.pagination.total=e.data.count,r.pagination.current=r.page):(r.tableLoading=!1,W.Z["error"]({message:"Error",description:e.msg}))}))},onMaxSearch(){r.maxSearchValue&&e.push({path:"Search",query:{address:r.maxSearchValue}})},handleClickRow(t,a){return{onClick:a=>{e.push({path:"Info",query:{tick:t.name}})}}},async showModal(){if(!a.state.web3)return void a.dispatch("showWalletModal",!0);r.open=!0;let e=await a.state.readContract.methods.maxMintAmt().call();F.Z.gt(e,"0")?r.mintFeeTip="Free mint is 0. Max mint fee is "+F.Z.divPow(e,18,2):r.mintFeeTip="Free mint is 0. Max mint fee is 0"},mintMaxFee(){l.mintFee=""+r.maxMintFee},formatter(e){return F.Z.formatter(e)},handleCancel(){r.open=!1,t.value.resetFields()},onSubmit(){t.value.validate().then((async()=>{if(!a.state.web3)return void a.dispatch("showWalletModal",!0);const e=await a.state.readContract.methods.startDate().call();if(F.Z.gt(e,(new Date).getTime()/1e3))return void window.notification["error"]({message:"Error",description:"Start time is "+F.Z.formatter(1e3*parseInt(e))});if(await a.state.readContract.methods.existTick(l.tick.trim()).call())return void window.notification["error"]({message:"Error",description:"Tick name unavailable"});let i=await a.state.readContract.methods.maxMintAmt().call(),o=F.Z.timesPow(l.mintFee,18,0);if(F.Z.gt(o,i))return void window.notification["error"]({message:"Error",description:"Mint fee cannot be greater than "+F.Z.divPow(i,18,2)});if(F.Z.gte(0,l.limitPerAddress))return void window.notification["error"]({message:"Error",description:"Limit per address must greater than 0"});r.loading=!0;let n=a.state.wallet_address,s=a.state.toAddress,d=await a.state.readContract.methods.deployAmt().call()+"",m=F.Z.stringToHex('{"p":"'+l.protocol+'","op":"deploy","tick":"'+l.tick.trim()+'","amt":"'+l.totalSupply+'","limit":"'+l.limitPerMint+'","mintAmt":"'+o+'","maxMint":"'+l.limitPerAddress+'","whitelist":"'+l.whitelist+'"}');if("Ale"==a.state.wallet_type){const e=await window.aleereum.send({action:"send_block",from:n,to:s,amount:d,data:m,gas_price:"100000000000",gasPrice:await(0,z.k3)(),gen_next_work:""});e?(window.notification["success"]({message:"Success",description:""}),r.open=!1,r.loading=!1,t.value.resetFields()):(window.notification["error"]({message:"Error",description:"Deploy error"}),r.loading=!1)}else a.state.provider.request({method:"eth_sendTransaction",params:[{from:n,to:s,data:m,value:F.Z.numberToHex(d),gasPrice:await(0,z.k3)()}]}).then((e=>{window.notification["success"]({message:"Success",description:""}),r.open=!1,r.loading=!1,t.value.resetFields()})).catch((e=>{window.notification["error"]({message:"Error",description:JSON.stringify(e)}),r.loading=!1}))})).catch((e=>{window.notification["error"]({message:"Error",description:e}),r.loading=!1}))}};return{formRef:t,formState:l,...(0,C.BK)(r),...o}}}),A=a(89);const q=(0,A.Z)(T,[["render",S]]);var I=q}}]);